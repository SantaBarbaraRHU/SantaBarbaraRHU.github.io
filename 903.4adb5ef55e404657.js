"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[903],{4903:(ot,f,o)=>{o.r(f),o.d(f,{ReportsModule:()=>nt});var g=o(655),R=o(3995),U=o(4942),h=o(574),M=o(4327),S=o(7579),J=o(2722),O=o(5698),v=o(1665),x=o(2448),Z=o(3622),y=o(101),b=o(1764),T=o.n(b),t=o(2223),d=o(3130),G=o(9539),F=o(8278),m=o(9401),i=o(4755),Q=o(430),Y=o(8097),C=o(9114),I=o(787),N=o(1217),$=o(1728),c=o(8280),E=o(670),_=o(6758),D=o(9670);const j=(0,d.P1)(n=>n.ageGroups,n=>(0,_.E)(n));D.xp.getSelectors();var H=o(7582);function P(n,a){1&n&&(t.TgZ(0,"div",3),t._UZ(1,"app-spinner"),t.qZA())}const B=function(n){return{"font-bold bg-teal-100":n}};function q(n,a){if(1&n&&(t.TgZ(0,"tr",11)(1,"td",12),t._uU(2),t.qZA(),t.TgZ(3,"td",12),t._uU(4),t.qZA(),t.TgZ(5,"td",12),t._uU(6),t.qZA(),t.TgZ(7,"td",12),t._uU(8),t.qZA(),t.TgZ(9,"td",12),t._uU(10),t.qZA(),t.TgZ(11,"td",12),t._uU(12),t.qZA(),t.TgZ(13,"td",12),t._uU(14),t.qZA()()),2&n){const e=a.$implicit,r=a.index,s=t.oxw(3);t.Q6J("ngClass",t.VKq(8,B,r===s.ageGroups.length-1)),t.xp6(2),t.Oqu(e.bracket),t.xp6(2),t.Oqu(e.totalPatients),t.xp6(2),t.Oqu(e.males),t.xp6(2),t.Oqu(e.females),t.xp6(2),t.Oqu(e.totalDiagnosed),t.xp6(2),t.Oqu(e.diagnosedMale),t.xp6(2),t.Oqu(e.diagnosedFemale)}}function w(n,a){if(1&n&&(t.TgZ(0,"div",4)(1,"div",5)(2,"table",6)(3,"thead",7)(4,"tr",8)(5,"th",9),t._uU(6,"Bracket"),t.qZA(),t.TgZ(7,"th",9),t._uU(8," Total Patients "),t.qZA(),t.TgZ(9,"th",9),t._uU(10," Total Males "),t.qZA(),t.TgZ(11,"th",9),t._uU(12," Total Females "),t.qZA(),t.TgZ(13,"th",9),t._uU(14," Total Diagnosed "),t.qZA(),t.TgZ(15,"th",9),t._uU(16," Diagnosed Males "),t.qZA(),t.TgZ(17,"th",9),t._uU(18," Diagnosed Females "),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,q,15,10,"tr",10),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(19),t.Q6J("@listAnimation",e.ageGroups.length),t.xp6(1),t.Q6J("ngForOf",e.ageGroups)}}function K(n,a){if(1&n&&(t.ynx(0),t.YNc(1,P,2,0,"div",1),t.YNc(2,w,21,2,"div",2),t.BQk()),2&n){const e=a.ngIf,r=t.oxw();t.xp6(1),t.Q6J("ngIf","idle"!==e||!r.ready),t.xp6(1),t.Q6J("ngIf","idle"===e&&r.ready)}}function V(n,a){1&n&&t.GkF(0)}class l{constructor(a){this._store=a,this.ready=!1}}l.\u0275fac=function(a){return new(a||l)(t.Y36(d.yh))},l.\u0275cmp=t.Xpm({type:l,selectors:[["report-list"]],inputs:{ageGroups:"ageGroups",ready:"ready"},decls:4,vars:6,consts:[[4,"ngIf"],["class","flex items-center justify-center w-full p-10 bg-white",4,"ngIf"],["class","flex flex-col flex-auto p-6 px-5 mb-5 overflow-hidden sm:col-span-6 bg-card",4,"ngIf"],[1,"flex","items-center","justify-center","w-full","p-10","bg-white"],[1,"flex","flex-col","flex-auto","p-6","px-5","mb-5","overflow-hidden","sm:col-span-6","bg-card"],[1,"flex","flex-col","flex-auto","h-full","mt-5","overflow-x-auto"],[1,"overflow-y-visible","min-w-240"],[1,"text-right","uppercase"],[1,"bg-gray-100"],[1,"px-4","text-left","text-gray-700"],["class","border-t border-gray-100 hover:bg-slate-100",3,"ngClass",4,"ngFor","ngForOf"],[1,"border-t","border-gray-100","hover:bg-slate-100",3,"ngClass"],[1,"px-4"]],template:function(a,e){if(1&a&&(t.YNc(0,K,3,2,"ng-container",0),t.ALo(1,"async"),t.YNc(2,V,1,0,"ng-container",0),t.ALo(3,"async")),2&a){let r;t.Q6J("ngIf",null==(r=t.lcZ(1,2,e.loader$))?null:r.getLoader),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,e.patients$))}},dependencies:[H.S,i.mk,i.sg,i.O5,i.Ov],encapsulation:2,data:{animation:[...y.x]}}),(0,g.gn)([(0,x.Z)({selector:v.f.PATIENTS,type:"array"})],l.prototype,"patients$",void 0),(0,g.gn)([(0,E.n)(j)],l.prototype,"loader$",void 0);const k=function(n,a){return{"bg-black text-white pointer-events-none":n,"text-gray-500 md:hover:bg-gray-50":a}};function W(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){const u=t.CHM(e).$implicit,A=t.oxw();return A.currentRHU=u,t.KtG(A.filter())}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit,r=t.oxw();t.Q6J("ngClass",t.WLB(2,k,r.currentRHU===e,r.currentRHU!==e)),t.xp6(1),t.hij(" ",e," ")}}function z(n,a){if(1&n&&(t.TgZ(0,"mat-option",6),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function X(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.diagnosis="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}class p{constructor(a,e){this._store=a,this._reportService=e,this.destroyed$=new S.x,this.RHU=Object.values(U.V),this.SERVICES=Object.values(R.S),this.currentRHU=this.RHU[0],this.currentService=void 0,this.diagnosis="",this.startAt=T()().startOf("month").format("YYYY-MM-DD"),this.endAt=T()().endOf("month").format("YYYY-MM-DD"),this.ready=!1,this._reportService.filter$.pipe((0,J.R)(this.destroyed$)).subscribe(()=>this.filter())}ngOnInit(){setTimeout(()=>{this._store.dispatch(Z.S.APPOINTMENTS.load.request({isToday:!1})),this.ready=!0},1500)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}filter(){this._store.dispatch(Z.S.AGE_GROUP.load.request({param:{keyword:this.diagnosis,appointmentType:this.currentService,startAt:this.startAt,endAt:this.endAt,rhu:this.currentRHU}}))}generateExcel(){this.ageGroups$.pipe((0,O.q)(1)).subscribe(a=>{const r={Sheets:{data:h.P6.json_to_sheet(a)},SheetNames:["data"]},s=h.cW(r,{bookType:"xlsx",type:"array"}),u=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});M.saveAs(u,`generated-${Date.now().toString()}.xlsx`)})}}p.\u0275fac=function(a){return new(a||p)(t.Y36(d.yh),t.Y36(G.r))},p.\u0275cmp=t.Xpm({type:p,selectors:[["reports"]],decls:26,vars:14,consts:[[1,"flex","flex-col","w-full"],["pageTitle","Reports","subtitle","You can filter and generate reports here","icon","feather:activity",1,"w-full"],[1,"flex","items-center","w-full","p-3","bg-white"],["class","px-5 py-2 mr-3 active:opacity-25",3,"ngClass","click",4,"ngFor","ngForOf"],["appearance","fill",1,"mb-0","ml-auto","translate-y-2","min-w-64"],["placeholder","Type of Service",3,"ngModel","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","svgIcon","feather:chevron-down"],["appearance","fill",1,"mx-3","mb-0","translate-y-2","min-w-64"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","dateChange","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"mx-3","mb-0","mr-6","translate-y-2","min-w-64"],["svgIcon","feather:search",1,"mr-3"],["matInput","","placeholder","Diagnosis",3,"ngModel","input","ngModelChange"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],[1,"flex","items-center","px-5","py-3","text-white","bg-black","rounded-sm",3,"click"],["svgIcon","feather:plus",1,"mr-3","text-white"],[3,"ready","ageGroups"],[1,"px-5","py-2","mr-3","active:opacity-25",3,"ngClass","click"],["matSuffix","","mat-icon-button","",3,"click"]],template:function(a,e){if(1&a&&(t.TgZ(0,"div",0),t._UZ(1,"route-header",1),t.TgZ(2,"div",2),t.YNc(3,W,2,5,"button",3),t.TgZ(4,"mat-form-field",4)(5,"mat-select",5),t.NdJ("ngModelChange",function(s){return e.currentService=s})("selectionChange",function(){return e.filter()}),t.TgZ(6,"mat-option",6),t._uU(7,"All"),t.qZA(),t.YNc(8,z,2,2,"mat-option",7),t.qZA(),t._UZ(9,"mat-icon",8),t.qZA(),t.TgZ(10,"mat-form-field",9)(11,"mat-date-range-input",10)(12,"input",11),t.NdJ("ngModelChange",function(s){return e.startAt=s}),t.qZA(),t.TgZ(13,"input",12),t.NdJ("dateChange",function(){return e.filter()})("ngModelChange",function(s){return e.endAt=s}),t.qZA()(),t._UZ(14,"mat-datepicker-toggle",13)(15,"mat-date-range-picker",null,14),t.qZA(),t.TgZ(17,"mat-form-field",15),t._UZ(18,"mat-icon",16),t.TgZ(19,"input",17),t.NdJ("input",function(){return e.filter()})("ngModelChange",function(s){return e.diagnosis=s}),t.qZA(),t.YNc(20,X,3,0,"button",18),t.qZA(),t.TgZ(21,"button",19),t.NdJ("click",function(){return e.generateExcel()}),t._UZ(22,"mat-icon",20),t._uU(23," Generate Report "),t.qZA()(),t._UZ(24,"report-list",21),t.ALo(25,"async"),t.qZA()),2&a){const r=t.MAs(16);t.xp6(3),t.Q6J("ngForOf",e.RHU),t.xp6(2),t.Q6J("ngModel",e.currentService),t.xp6(1),t.Q6J("value",void 0),t.xp6(2),t.Q6J("ngForOf",e.SERVICES),t.xp6(3),t.Q6J("rangePicker",r),t.xp6(1),t.Q6J("ngModel",e.startAt),t.xp6(1),t.Q6J("ngModel",e.endAt),t.xp6(1),t.Q6J("for",r),t.xp6(5),t.Q6J("ngModel",e.diagnosis),t.xp6(1),t.Q6J("ngIf",e.diagnosis),t.xp6(4),t.Q6J("ready",e.ready)("ageGroups",t.lcZ(25,12,e.ageGroups$))}},dependencies:[F.t,m.Fj,m.JJ,m.On,i.mk,i.sg,i.O5,Q.Hw,Y.Nt,C.KE,C.R9,I.gD,N.ey,$.RK,c.nW,c.wx,c.zY,c.By,c._g,l,i.Ov],encapsulation:2,data:{animation:[...y.x]}}),(0,g.gn)([(0,x.Z)({selector:v.f.AGE_GROUP,type:"array"})],p.prototype,"ageGroups$",void 0);var tt=o(3117),et=o(3676);let nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[tt.m,et.Bz.forChild([{path:"",component:p}])]}),n})()}}]);